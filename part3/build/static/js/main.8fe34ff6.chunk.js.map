{"version":3,"sources":["components/Filter.js","components/Notification.js","components/PersonForm.js","components/Person.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["Filter","filter","handleFilter","value","onChange","Notification","message","style","color","isError","background","fontSize","borderStyle","borderRadius","padding","marginBottom","msg","PersonForm","addPerson","newName","handleNewName","newNumber","handleNewNumber","onSubmit","type","Person","person","deletePerson","name","number","onClick","Persons","persons","map","baseUrl","personService","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","deleteElement","delete","App","useState","setPersons","setNewName","setNewNumber","setFilter","setMessage","useEffect","catch","error","setTimeout","find","toUpperCase","alert","personsToShow","includes","e","target","preventDefault","personFind","window","confirm","newData","updatedPerson","updatePerson","returnedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8fe34ff6.chunk.js","sourcesContent":["import React from 'react';\n\nexport const Filter = ({ filter, handleFilter }) => {\n  return (\n    <div>\n      filter shown with <input value={filter} onChange={handleFilter} />\n    </div>\n  );\n};\n","import React from 'react';\n\nexport const Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  const style = {\n    color: message.isError ? 'red' : 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n  };\n\n  return <div style={style}>{message.msg}</div>;\n};\n","import React from 'react';\n\nexport const PersonForm = ({\n  addPerson,\n  newName,\n  handleNewName,\n  newNumber,\n  handleNewNumber,\n}) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name: <input value={newName} onChange={handleNewName} />\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={handleNewNumber} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n","import React from 'react';\n\nexport const Person = ({ person, deletePerson }) => {\n  return (\n    <div key={person.name} person={person}>\n      {person.name} {person.number}{' '}\n      <button onClick={() => deletePerson(person)}> delete</button>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Person } from './Person';\n\nexport const Persons = ({ persons, deletePerson }) => {\n  return (\n    <>\n      {persons.map((person) => (\n        <Person key={person.name} person={person} deletePerson={deletePerson} />\n      ))}\n    </>\n  );\n};\n","import axios from 'axios';\n\n//const baseUrl = 'http://localhost:3001/api/persons';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => [...response.data]);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst deleteElement = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nconst personService = {\n  getAll,\n  create,\n  update,\n  deleteElement,\n};\n\nexport default personService;\n","import { useEffect, useState } from 'react';\n\nimport { Filter } from './components/Filter';\nimport { Notification } from './components/Notification';\nimport { PersonForm } from './components/PersonForm';\nimport { Persons } from './components/Persons';\nimport personService from './services/persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setFilter] = useState('');\n  const [message, setMessage] = useState(null);\n\n  const getAll = () => {\n    personService\n      .getAll()\n      .then((response) => {\n        setPersons(response);\n      })\n      .catch((error) => {\n        setMessage({\n          msg: 'There was a problem getting the data',\n          isError: true,\n        });\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      });\n  };\n\n  useEffect(() => {\n    getAll();\n  }, []);\n\n  useEffect(() => {\n    if (\n      persons.find(\n        (person) => person.name.toUpperCase() === newName.toUpperCase()\n      )\n    ) {\n      alert(`${newName} is already added to phonebook`);\n    }\n  }, [newName, persons]);\n\n  const updatePerson = (personFind) => {\n    const newData = { name: personFind.name, number: newNumber };\n    personService\n      .update(personFind.id, newData)\n      .then((updatedPerson) => {\n        setMessage({\n          msg: `Updated ${updatedPerson.name} number to ${newData.number}`,\n          isError: false,\n        });\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n\n        setNewName('');\n        setNewNumber('');\n        setPersons(\n          persons.map((person) =>\n            person.id !== personFind.id ? person : updatedPerson\n          )\n        );\n      })\n      .catch((error) => {\n        setNewName('');\n        setNewNumber('');\n\n        setMessage({\n          msg: `There was a problem updating ${personFind.name}: ${error.response.data.error}`,\n          isError: true,\n        });\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      });\n  };\n\n  const addPerson = (e) => {\n    e.preventDefault();\n\n    if (newName === '') {\n      setMessage({\n        msg: 'Name required',\n        isError: true,\n      });\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n      return;\n    }\n\n    const personFind = persons.find(\n      (person) => person.name.toUpperCase() === newName.toUpperCase()\n    );\n    if (personFind) {\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        updatePerson(personFind);\n        return;\n      }\n      setNewName('');\n      setNewNumber('');\n      return;\n    }\n\n    const person = { name: newName, number: newNumber };\n    personService\n      .create(person)\n      .then((returnedPerson) => {\n        setMessage({\n          msg: `Added ${returnedPerson.name}`,\n          isError: false,\n        });\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n\n        setNewName('');\n        setNewNumber('');\n        setPersons([...persons, returnedPerson]);\n      })\n      .catch((error) => {\n        setNewName('');\n        setNewNumber('');\n\n        setMessage({\n          msg: error.response.data.error,\n          isError: true,\n        });\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      });\n  };\n\n  const deletePerson = (person) => {\n    const { name, id } = person;\n    if (window.confirm(`Delete ${name}?`)) {\n      personService\n        .deleteElement(id)\n        .then((response) => {\n          setMessage({\n            msg: `${person.name} has been deleted`,\n            isError: false,\n          });\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n\n          setPersons(persons.filter((person) => person.id !== id));\n        })\n        .catch((error) => {\n          setNewName('');\n          setNewNumber('');\n\n          setMessage({\n            msg: `There was a problem deleting ${person.name}: ${error.response.data.error}`,\n            isError: true,\n          });\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const handleNewName = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNewNumber = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleFilter = (e) => {\n    setFilter(e.target.value);\n  };\n\n  const personsToShow =\n    filter === ''\n      ? [...persons]\n      : persons.filter((person) =>\n          person.name.toUpperCase().includes(filter.toUpperCase())\n        );\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={message} />\n\n      <Filter filter={filter} handleFilter={handleFilter} />\n\n      <h3>add a new</h3>\n\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        handleNewName={handleNewName}\n        newNumber={newNumber}\n        handleNewNumber={handleNewNumber}\n      />\n\n      <h3>Numbers</h3>\n\n      <Persons persons={personsToShow} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}