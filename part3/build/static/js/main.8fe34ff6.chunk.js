(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var r=t(1),o=t(17),c=t.n(o),a=t(5),i=t(3),u=t(0),s=function(e){var n=e.filter,t=e.handleFilter;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.message;if(null===n)return null;var t={color:n.isError?"red":"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return Object(u.jsx)("div",{style:t,children:n.msg})},l=function(e){var n=e.addPerson,t=e.newName,r=e.handleNewName,o=e.newNumber,c=e.handleNewNumber;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:r})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:o,onChange:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var n=e.person,t=e.deletePerson;return Object(u.jsxs)("div",{person:n,children:[n.name," ",n.number," ",Object(u.jsx)("button",{onClick:function(){return t(n)},children:" delete"})]},n.name)},b=function(e){var n=e.persons,t=e.deletePerson;return Object(u.jsx)(u.Fragment,{children:n.map((function(e){return Object(u.jsx)(m,{person:e,deletePerson:t},e.name)}))})},f=t(6),j=t.n(f),h="/api/persons",p={getAll:function(){return j.a.get(h).then((function(e){return Object(a.a)(e.data)}))},create:function(e){return j.a.post(h,e).then((function(e){return e.data}))},update:function(e,n){return j.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},deleteElement:function(e){return j.a.delete("".concat(h,"/").concat(e))}},O=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),m=Object(i.a)(c,2),f=m[0],j=m[1],h=Object(r.useState)(""),O=Object(i.a)(h,2),g=O[0],v=O[1],x=Object(r.useState)(""),w=Object(i.a)(x,2),E=w[0],N=w[1],T=Object(r.useState)(null),C=Object(i.a)(T,2),k=C[0],S=C[1];Object(r.useEffect)((function(){p.getAll().then((function(e){o(e)})).catch((function(e){S({msg:"There was a problem getting the data",isError:!0}),setTimeout((function(){S(null)}),5e3)}))}),[]),Object(r.useEffect)((function(){t.find((function(e){return e.name.toUpperCase()===f.toUpperCase()}))&&alert("".concat(f," is already added to phonebook"))}),[f,t]);var y=""===E?Object(a.a)(t):t.filter((function(e){return e.name.toUpperCase().includes(E.toUpperCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(d,{message:k}),Object(u.jsx)(s,{filter:E,handleFilter:function(e){N(e.target.value)}}),Object(u.jsx)("h3",{children:"add a new"}),Object(u.jsx)(l,{addPerson:function(e){if(e.preventDefault(),""===f)return S({msg:"Name required",isError:!0}),void setTimeout((function(){S(null)}),5e3);var n=t.find((function(e){return e.name.toUpperCase()===f.toUpperCase()}));if(n)return window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))?void function(e){var n={name:e.name,number:g};p.update(e.id,n).then((function(r){S({msg:"Updated ".concat(r.name," number to ").concat(n.number),isError:!1}),setTimeout((function(){S(null)}),5e3),j(""),v(""),o(t.map((function(n){return n.id!==e.id?n:r})))})).catch((function(n){j(""),v(""),S({msg:"There was a problem updating ".concat(e.name,": ").concat(n.response.data.error),isError:!0}),setTimeout((function(){S(null)}),5e3)}))}(n):(j(""),void v(""));var r={name:f,number:g};p.create(r).then((function(e){S({msg:"Added ".concat(e.name),isError:!1}),setTimeout((function(){S(null)}),5e3),j(""),v(""),o([].concat(Object(a.a)(t),[e]))})).catch((function(e){j(""),v(""),S({msg:e.response.data.error,isError:!0}),setTimeout((function(){S(null)}),5e3)}))},newName:f,handleNewName:function(e){j(e.target.value)},newNumber:g,handleNewNumber:function(e){v(e.target.value)}}),Object(u.jsx)("h3",{children:"Numbers"}),Object(u.jsx)(b,{persons:y,deletePerson:function(e){var n=e.name,r=e.id;window.confirm("Delete ".concat(n,"?"))&&p.deleteElement(r).then((function(n){S({msg:"".concat(e.name," has been deleted"),isError:!1}),setTimeout((function(){S(null)}),5e3),o(t.filter((function(e){return e.id!==r})))})).catch((function(n){j(""),v(""),S({msg:"There was a problem deleting ".concat(e.name,": ").concat(n.response.data.error),isError:!0}),setTimeout((function(){S(null)}),5e3)}))}})]})};c.a.render(Object(u.jsx)(O,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.8fe34ff6.chunk.js.map